(function(){$(function(){function t(){r.getAll({maxResultCount:1e6}).done(function(n){f(n.items)})}function f(n){u=$("#table_100").DataTable({data:n,destroy:!0,searching:!0,dom:"Bftir",language:$.getDataTableLang(),buttons:$.getDataTableButtons(),deferRender:!0,scrollY:$(window).height()-400,scrollX:!0,scrollCollapse:!0,scroller:!0,columns:[{data:"userName",width:"120px"},{data:"isActive",width:"100px",render:function(n){return n?'<i class="material-icons" style="color:green;">check_box<\/i>':'<i class="material-icons" style="color:red;">indeterminate_check_box<\/i>'}},{orderable:!1,bSortable:!1,data:"id",width:"35px",render:function(n){var t='<div style="text-align:center;" >';return t+='   <a href="#" class="waves-effect waves-block edit-user" data-user-id="'+n+'"  data-toggle="modal" data-target="#UserEditModal"><i class="tiny material-icons">edit<\/i><\/a>',t+"<\/div>"}},{orderable:!1,bSortable:!1,data:"id",width:"35px",render:function(n,t,i){var r='<div style="text-align:center;" >';return r+='   <a href="#" class="waves-effect waves-block delete-user" data-user-id="'+n+'"   data-user-name="'+i.userName+'"><i class="tiny material-icons">delete_sweep<\/i><\/a>',r+"<\/div>"}},{data:"fullName",width:"100px"},{data:"emailAddress"}],initComplete:function(){e();o();$.setTableSelectedRowsCss("table_100");$.bindTableColumnSearchEvent("table_100");$.resetTableColumnSearchInput("table_100")}})}function e(){$(".edit-user").click(function(n){var t=$(this).attr("data-user-id");n.preventDefault();$.ajax({url:abp.appPath+"Users/EditUserModal?userId="+t,type:"POST",contentType:"application/html",success:function(n){$("#UserEditModal div.modal-content").html(n)},error:function(){}})})}function o(){$(".delete-user").click(function(){var n=$(this).attr("data-user-id"),i=$(this).attr("data-user-name");abp.message.confirm(abp.utils.formatString(abp.localization.localize("AreYouSureWantToDelete","Ginkgo"),i),function(i){i&&r.delete({id:n}).done(function(){t()})})})}var r=abp.services.app.user,u=null,n,i;t();$.setTableColumnSearchInput("table_100");$("#UserEditModal").on("hide.bs.modal",function(){var n=$(this).find(".save-button").hasClass("save-clicked");n&&t()});$("#RefreshButton").click(function(){t()});n=$("#UserCreateModal");i=n.find("form");i.validate({rules:{Password:"required",ConfirmPassword:{equalTo:"#Password"}}});i.find('button[type="submit"]').click(function(u){var f,e,o,s;if(u.preventDefault(),i.valid()){if(f=i.serializeFormToObject(),f.roleNames=[],e=$("input[name='role']:checked"),e)for(o=0;o<e.length;o++)s=$(e[o]),f.roleNames.push(s.val());abp.ui.setBusy(n);r.create(f).done(function(){n.modal("hide");t()}).always(function(){abp.ui.clearBusy(n)})}});n.on("shown.bs.modal",function(){n.find("input:not([type=hidden]):first").focus()})})})();