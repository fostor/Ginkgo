(function(){$(function(){function t(){r.getAll({maxResultCount:1e6}).done(function(n){f(n.items)})}function f(n){u=$("#table_100").DataTable({data:n,destroy:!0,searching:!0,dom:"Bftir",language:$.getDataTableLang(),buttons:$.getDataTableButtons(),deferRender:!0,scrollY:$(window).height()-350,scrollX:!0,scrollCollapse:!0,scroller:!0,columns:[{data:"name",width:"120px"},{data:"displayName",width:"120px"},{orderable:!1,bSortable:!1,data:"id",width:"35px",render:function(n){var t='<div style="text-align:center;" >';return t+='   <a href="#" class="waves-effect waves-block edit-role" data-role-id="'+n+'"  data-toggle="modal" data-target="#RoleEditModal"><i class="tiny material-icons">edit<\/i><\/a>',t+"<\/div>"}},{orderable:!1,bSortable:!1,data:"id",width:"35px",render:function(n,t,i){var r='<div style="text-align:center;" >';return r+='   <a href="#" class="waves-effect waves-block delete-role" data-role-id="'+n+'"   data-role-name="'+i.name+'"><i class="tiny material-icons">delete_sweep<\/i><\/a>',r+"<\/div>"}}],initComplete:function(){e();o();$.setTableSelectedRowsCss("table_100")}})}function e(){$(".edit-role").click(function(n){var t=$(this).attr("data-role-id");n.preventDefault();$.ajax({url:abp.appPath+"Roles/EditRoleModal?roleId="+t,type:"POST",contentType:"application/html",success:function(n){$("#RoleEditModal div.modal-content").html(n)},error:function(){}})})}function o(){$(".delete-role").click(function(){var n=$(this).attr("data-role-id"),i=$(this).attr("data-role-name");abp.message.confirm(abp.utils.formatString(abp.localization.localize("AreYouSureWantToDelete","Ginkgo"),i),function(i){i&&r.delete({id:n}).done(function(){t()})})})}var r=abp.services.app.role,u=null,n,i;t();$("#RoleEditModal").on("hide.bs.modal",function(){var n=$(this).find(".save-button").hasClass("save-clicked");n&&t()});$("#RefreshButton").click(function(){t()});n=$("#RoleCreateModal");i=n.find("form");i.validate({});i.find('button[type="submit"]').click(function(u){if(u.preventDefault(),i.valid()){var f=i.serializeFormToObject();f.permissions=[];abp.ui.setBusy(n);r.create(f).done(function(){n.modal("hide");t()}).always(function(){abp.ui.clearBusy(n)})}});n.on("shown.bs.modal",function(){n.find("input:not([type=hidden]):first").focus()})})})();