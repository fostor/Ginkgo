(function(){$(function(){function i(){var t=$("select[name=CategoryCode]").val();n.find("input[name=CategoryCode]").val(t);t&&r.getList(t).done(function(n){f(n)})}function f(n){u=$("#table_100").DataTable({data:n,destroy:!0,searching:!0,dom:"Bftir",language:$.getDataTableLang(),buttons:$.getDataTableButtons(),deferRender:!0,scrollY:$(window).height()-350,scrollX:!0,scrollCollapse:!0,scroller:!0,columns:[{data:"categoryCode",width:"150px"},{data:"key",width:"100px"},{data:"value"},{orderable:!1,bSortable:!1,data:"id",width:"35px",render:function(n){var t='<div style="text-align:center;" >';return t+='   <a href="#" class="waves-effect waves-block edit-datadict" data-datadict-id="'+n+'"  data-toggle="modal" data-target="#DataDictEditModal"><i class="tiny material-icons">edit<\/i><\/a>',t+"<\/div>"}},{orderable:!1,bSortable:!1,data:"id",width:"35px",render:function(n,t,i){var r='<div style="text-align:center;" >';return r+='   <a href="#" class="waves-effect waves-block delete-datadict" data-datadict-id="'+n+'"   data-datadict-name="'+i.key+" "+i.value+'"><i class="tiny material-icons">delete_sweep<\/i><\/a>',r+"<\/div>"}}],initComplete:function(){e();o();$.setTableSelectedRowsCss("table_100")}})}function e(){$(".edit-datadict").click(function(n){var t=$(this).attr("data-datadict-id");n.preventDefault();$.ajax({url:abp.appPath+"Admin/DataDict/Edit?id="+t,type:"POST",contentType:"application/html",success:function(n){$("#DataDictEditModal div.modal-content").html(n)},error:function(){}})})}function o(){$(".delete-datadict").click(function(){var n=$(this).attr("data-datadict-id"),t=$(this).attr("data-datadict-name");abp.message.confirm("Delete data dictionary config '"+t+"'?",function(t){t&&r.delete({id:n}).done(function(){i()})})})}var r=abp.services.app.dataDictionary,t=$("#DataDictCreateModal"),n=t.find("form"),u;$("select[name=CategoryCode]").change(function(n){n.preventDefault();i()});u=null;$("#DataDictEditModal").on("hide.bs.modal",function(){i()});n.validate({});n.find('button[type="submit"]').click(function(u){if(u.preventDefault(),n.valid()){var f=n.serializeFormToObject();f.tenantId=abp.session.tenantId;f.creator=abp.session.userId;abp.ui.setBusy(t);r.create(f).done(function(){t.modal("hide");n.find('input[name="Key"]').val("");n.find('input[name="Value"]').val("");n.find("input[name=CategoryCode]").val()==="DataDictCategoryCode"?location.reload(!0):i()}).always(function(){abp.ui.clearBusy(t)})}});t.on("shown.bs.modal",function(){t.find("input:not([type=hidden]):first").focus()})})})();