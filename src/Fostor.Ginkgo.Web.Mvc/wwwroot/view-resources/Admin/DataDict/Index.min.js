(function(){$(function(){function i(){var n=$("select[name=CategoryCode]").val();t.find("input[name=CategoryCode]").val(n);n&&r.getList(n).done(function(n){u(n)})}function u(n){var t=$("#table_100").DataTable({data:n,destroy:!0,searching:!0,dom:"Bftir",language:$.getDataTableLang(),buttons:$.getDataTableButtons(),deferRender:!0,scrollY:$(window).height()-320,scrollX:!0,scrollCollapse:!0,scroller:!0,columns:[{data:"categoryCode",width:"150px"},{data:"key",width:"100px"},{data:"value"},{data:"id",width:"35px",render:function(n){var t='<div style="text-align:center;" >';return t+='   <a href="#" class="waves-effect waves-block edit-datadict" data-datadict-id="'+n+'"  data-toggle="modal" data-target="#DataDictEditModal"><i class="tiny material-icons">edit<\/i><\/a>',t+"<\/div>"}},{data:"id",width:"35px",render:function(n,t,i){var r='<div style="text-align:center;" >';return r+='   <a href="#" class="waves-effect waves-block delete-datadict" data-datadict-id="'+n+'"   data-datadict-name="'+i.key+" "+i.value+'"><i class="tiny material-icons">delete_sweep<\/i><\/a>',r+"<\/div>"}}],initComplete:function(){f();e();$.setTableSelectedRowsCss("table_100");$.fixDataTableHeight("table_100",$(window).height()-320)}})}function f(){$(".edit-datadict").click(function(n){var t=$(this).attr("data-datadict-id");n.preventDefault();$.ajax({url:abp.appPath+"Admin/DataDict/Edit?id="+t,type:"POST",contentType:"application/html",success:function(n){$("#DataDictEditModalBody").html(n)},error:function(){}})})}function e(){$(".delete-datadict").click(function(){var n=$(this).attr("data-datadict-id"),t=$(this).attr("data-datadict-name");abp.message.confirm($.deleteConfirm(t),function(t){t&&r.delete({id:n}).done(function(){i()})})})}var r=abp.services.app.dataDictionary,n,t;$("select[name=CategoryCode]").change(function(n){n.preventDefault();i()});$("#DataDictEditModal").on("hide.bs.modal",function(){i()});n=$("#DataDictCreateModal");t=n.find("form");t.validate({});n.find('button[type="submit"]').click(function(u){if(u.preventDefault(),t.valid()){var f=t.serializeFormToObject();f.tenantId=abp.session.tenantId;f.creator=abp.session.userId;abp.ui.setBusy(n);r.create(f).done(function(){n.modal("hide");t.find('input[name="Key"]').val("");t.find('input[name="Value"]').val("");t.find("input[name=CategoryCode]").val()==="DataDictCategoryCode"?location.reload(!0):i()}).always(function(){abp.ui.clearBusy(n)})}});n.on("shown.bs.modal",function(){n.find("input:not([type=hidden]):first").focus()})})})();