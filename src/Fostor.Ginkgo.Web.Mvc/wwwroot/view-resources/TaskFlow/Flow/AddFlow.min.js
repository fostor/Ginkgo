(function(){$(function(){function i(){if(n.valid()){$("#UseConditionControl").val($("#UseConditionControl").is(":checked"));$("#CanAppendPhase").val($("#CanAppendPhase").is(":checked"));$("#Revocable").val($("#Revocable").is(":checked"));$("#IsDefaultForAllUser").val($("#IsDefaultForAllUser").is(":checked"));var i=n.serializeFormToObject();abp.ui.setBusy(n);t.create(i).done(function(n){location.href=abp.appPath+"TaskFlow/Flow/EditFlow?id="+n.id+"&fromadd=1"})}}function r(){if(history.length>1){var t=location.href,n=1;t.indexOf("#")>0&&(n+=1);t.indexOf("fromadd")>0&&(n+=1);history.go(-n)}else window.close()}var t=abp.services.app.taskTemplate,n=$("form[name=FlowCreateForm]");n.find("input[name=UseConditionControl]").click(function(){$(this).is(":checked")?(n.find("input[name=Condition1Name]").attr("readonly",!1),n.find("input[name=Condition2Name]").attr("readonly",!1),n.find("input[name=Condition3Name]").attr("readonly",!1)):(n.find("input[name=Condition1Name]").attr("readonly",!0),n.find("input[name=Condition2Name]").attr("readonly",!0),n.find("input[name=Condition3Name]").attr("readonly",!0))});n.find(".save-button").click(function(n){n.preventDefault();i()});n.find(".close-button").click(function(n){n.preventDefault();r()});$.AdminBSB.input.activate(n)})})();