(function(){$(function(){function n(){var i=$("form[name=SearchForm]"),n=i.serializeFormToObject();t.search(n.roleCode,n.roleName).done(function(n){r(n)})}function r(n){i=$("#table_100").DataTable({data:n,destroy:!0,searching:!0,dom:"Bftir",language:$.getDataTableLang(),buttons:$.getDataTableButtons(),deferRender:!0,scrollY:$(window).height()-330,scrollX:!0,scrollCollapse:!0,scroller:!0,columnDefs:[{targets:"_all",width:"100px"}],columns:[{data:"roleCode"},{data:"roleName"},{orderable:!1,bSortable:!1,data:"id",width:"35px",render:function(n){var t='<div style="text-align:center;" >';return t+='   <a href="#" class="waves-effect waves-block edit-task-role" data-role-id="'+n+'"  data-toggle="modal" data-target="#TaskRoleEditModal"><i class="tiny material-icons">reorder<\/i><\/a>',t+"<\/div>"}},{orderable:!1,bSortable:!1,data:"id",width:"35px",render:function(n,t,i){var r='<div style="text-align:center;" >';return r+='   <a href="#" class="waves-effect waves-block delete-task-role" data-role-id="'+n+'" data-code="'+i.roleCode+'" ><i class="tiny material-icons">delete<\/i><\/a>',r+"<\/div>"}},{data:"lastModifier"},{data:"lastModificationTime",render:function(n){return $.getDateString(n,16)}},{data:"creator"},{data:"creationTime",render:function(n){return $.getDateString(n,16)}}],initComplete:function(){$.setTableSelectedRowsCss("table_100");$.bindTableColumnSearchEvent("table_100");$.resetTableColumnSearchInput("table_100");$.fixDataTableHeight("table_100",$(window).height()-330)},drawCallback:function(){u();f()}})}function u(){$(".edit-task-role").off("click").on("click",function(n){n.preventDefault();var t=$(this).attr("data-role-id");$.ajax({url:abp.appPath+"TaskFlow/Flow/EditRole?id="+t,type:"POST",contentType:"application/html",success:function(n){$("#TaskRoleEditModal div.modal-content").html(n)},error:function(){}})})}function f(){$(".delete-task-role").off("click").on("click",function(i){i.preventDefault();var r=$(this).attr("data-role-id"),u=$(this).attr("data-code");abp.message.confirm($.deleteConfirm(u),function(i){i&&t.delete({id:r}).done(function(){n()})})})}var t=abp.services.app.taskRole,i;$("#btnSearch").click(function(t){t.preventDefault();n()});$(".add-task-role").click(function(n){n.preventDefault();$.ajax({url:abp.appPath+"TaskFlow/Flow/AddRole",type:"POST",contentType:"application/html",success:function(n){$("#TaskRoleCreateModal div.modal-content").html(n)},error:function(){}})});i=null;n();$.setTableColumnSearchInput("table_100");$("#TaskRoleCreateModal").on("hide.bs.modal",function(){var t=$(this).find(".save-button").hasClass("save-clicked");t&&n()});$("#TaskRoleEditModal").on("hide.bs.modal",function(){var t=$(this).find(".save-button").hasClass("save-clicked");t&&n()})})})();