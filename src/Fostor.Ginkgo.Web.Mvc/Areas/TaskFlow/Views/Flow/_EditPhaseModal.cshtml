@using Fostor.Ginkgo.Web.Models.Common.Modals
@using System.Collections.Generic
@using Fostor.Ginkgo.Web.Views.Shared.Components.TaskRoleSelector
@model Fostor.Ginkgo.Web.Areas.TaskFlow.Models.Flow.PhaseViewModel
@{
    Layout = null;
}
<link href="~/lib/multi-select/css/multi-select.css" rel="stylesheet" />
<style type="text/css">
    .ms-container .ms-list {
        height: 200px;
    }
</style>
<script src="~/lib/multi-select/js/jquery.multi-select.js" asp-append-version="true"></script>
<script src="~/lib/quicksearch/dist/jquery.quicksearch.min.js" asp-append-version="true"></script>
@Html.Partial("~/Views/Shared/Modals/_ModalHeader.cshtml", new ModalHeaderViewModel(L("EditTaskPhase")))

<div class="modal-body">
    <form name="TaskPhaseEditForm" role="form" novalidate class="form-validation form-horizontal">
        <input type="hidden" name="Id" value="@Model.Phase.Id" />
        <input type="hidden" name="TaskCode" value="@Model.Phase.TaskCode" />
        <input type="hidden" name="TaskUsers" value="@Model.Phase.TaskUsers" />
        <div class="modal-body">
            <div class="form-group">
                <label class="col-md-2 control-label">@L("PhaseCode")<span style="color:red;">*</span></label>
                <div class="col-md-4">
                    <div class="form-line">
                        <input class="form-control" type="text" name="PhaseCode" value="@Model.Phase.PhaseCode" readonly>
                    </div>
                </div>
                <label class="col-md-2 control-label">@L("PhaseName")<span style="color:red;">*</span></label>
                <div class="col-md-4">
                    <div class="form-line">
                        <input class="form-control" type="text" name="PhaseName" value="@Model.Phase.PhaseName" required>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">@L("TaskRoleConfig")</label>
                <div class="col-md-4">
                    @await Component.InvokeAsync(typeof(TaskRoleSelectorViewComponent), new { tagName = "TaskRole", selectedValue = Model.Phase.TaskRole ?? "" })
                </div>
                <label class="col-md-2 control-label">@L("UpdateFormUriTemplate")</label>
                <div class="col-md-4">
                    <div class="form-line">
                        <input class="form-control" type="text" name="UpdateFormUriTemplate" value="@Model.Phase.UpdateFormUriTemplate">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">@L("BatchHandleUriTemplate")</label>
                <div class="col-md-4">
                    <div class="form-line">
                        <input class="form-control" type="text" name="BatchHandleUriTemplate" value="@Model.Phase.BatchHandleUriTemplate">
                    </div>
                </div>
                <label class="col-md-2 control-label">@L("Condition1EndValue")</label>
                <div class="col-md-4">
                    <div class="form-line">
                        <input class="form-control" type="number" name="Condition1EndValue" value="@Model.Phase.Condition1EndValue">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">@L("Condition2EndValue")</label>
                <div class="col-md-4">
                    <div class="form-line">
                        <input class="form-control" type="number" name="Condition2EndValue" value="@Model.Phase.Condition2EndValue">
                    </div>
                </div>
                <label class="col-md-2 control-label">@L("Condition3EndValue")</label>
                <div class="col-md-4">
                    <div class="form-line">
                        <input class="form-control" type="number" name="Condition3EndValue" value="@Model.Phase.Condition3EndValue">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-2 checkbox">
                    <input type="checkbox" name="IsCountersignPhase" value="true" class="filled-in" id="IsCountersignPhase" @((Model.Phase.IsCountersignPhase ?? false) ? "checked" : "") />
                    <label for="IsCountersignPhase"> @L("IsCountersignPhase") </label>
                </div>
                <div class="col-md-2 checkbox">
                    <input type="checkbox" name="IsSignInPhase" value="true" class="filled-in" id="IsSignInPhase" @((Model.Phase.IsSignInPhase ?? false) ? "checked" : "") />
                    <label for="IsSignInPhase"> @L("IsSignInPhase") </label>
                </div>
                <div class="col-md-2 checkbox">
                    <input type="checkbox" name="CanUpdateForm" value="true" class="filled-in" id="CanUpdateForm" @((Model.Phase.CanUpdateForm ?? false) ? "checked" : "") />
                    <label for="CanUpdateForm"> @L("CanUpdateForm") </label>
                </div>
                <div class="col-md-2 checkbox">
                    <input type="checkbox" name="CanBatchHandle" value="true" class="filled-in" id="CanBatchHandle" @((Model.Phase.CanBatchHandle ?? false) ? "checked" : "") />
                    <label for="CanBatchHandle"> @L("CanBatchHandle") </label>
                </div>
                <div class="col-md-2 checkbox">
                    <input type="checkbox" name="CanReject" value="true" class="filled-in" id="CanReject" @((Model.Phase.CanReject ?? false) ? "checked" : "") />
                    <label for="CanReject"> @L("CanReject") </label>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">@L("TaskUsersConfig")</label>
                <div class="col-md-9">
                    <select id='task_users_select' multiple='multiple'>
                        @*<option value='000'>000</option>*@
                    </select>                   
                </div>
            </div>


        </div>
        @Html.Partial("~/Views/Shared/Modals/_ModalFooterWithSaveAndCancel.cshtml")
    </form>
</div>

<script src="~/view-resources/TaskFlow/Flow/_EditPhaseModal.js" asp-append-version="true"></script>



